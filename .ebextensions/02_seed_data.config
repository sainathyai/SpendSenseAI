container_commands:
  01_seed_database:
    command: |
      set -e
      mkdir -p /var/app/data
      cd /var/app/current
      if [ -d "data/processed" ] && [ -f "data/processed/accounts.csv" ]; then
        echo "[INFO] Seeding database from data/processed..."
        python -m ingest.load_data data/processed /var/app/data/spendsense.db --format csv --check-integrity
      else
        echo "[WARNING] Data directory or files not found. Skipping seeding."
        echo "[WARNING] Expected: data/processed/accounts.csv"
        ls -la data/processed/ 2>&1 || echo "[WARNING] data/processed directory does not exist"
      fi
    leader_only: true
